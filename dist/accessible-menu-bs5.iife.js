var AccessibleMenuBootstrap5=function(){"use strict";var he=Object.defineProperty;var ae=(c,d,T)=>d in c?he(c,d,{enumerable:!0,configurable:!0,writable:!0,value:T}):c[d]=T;var l=(c,d,T)=>(ae(c,typeof d!="symbol"?d+"":d,T),T);function c(r,s){typeof r=="string"?s.classList.add(r):s.classList.add(...r)}function d(r,s){typeof r=="string"?s.classList.remove(r):s.classList.remove(...r)}function T(r,s){try{if(typeof s!="object"){const e=typeof s;throw new TypeError(`Elements given to isValidInstance() must be inside of an object. "${e}" given.`)}for(const e in s)if(!(s[e]instanceof r)){const t=typeof s[e];throw new TypeError(`${e} must be an instance of ${r.name}. "${t}" given.`)}return{status:!0,error:null}}catch(e){return{status:!1,error:e}}}function b(r,s){try{if(typeof s!="object"){const e=typeof s;throw new TypeError(`Values given to isValidType() must be inside of an object. "${e}" given.`)}for(const e in s){const t=typeof s[e];if(t!==r)throw new TypeError(`${e} must be a ${r}. "${t}" given.`)}return{status:!0,error:null}}catch(e){return{status:!1,error:e}}}function z(r){try{if(typeof r!="object"){const s=typeof r;throw new TypeError(`Values given to isCSSSelector() must be inside of an object. "${s}" given.`)}for(const s in r)try{if(r[s]===null)throw new Error;document.querySelector(r[s])}catch{throw new TypeError(`${s} must be a valid CSS selector. "${r[s]}" given.`)}return{status:!0,error:null}}catch(s){return{status:!1,error:s}}}function D(r){try{if(typeof r!="object"||Array.isArray(r)){const s=typeof r;throw new TypeError(`Values given to isValidClassList() must be inside of an object. "${s}" given.`)}for(const s in r){const e=typeof r[s];if(e!=="string")if(Array.isArray(r[s]))r[s].forEach(t=>{if(typeof t!="string")throw new TypeError(`${s} must be a string or an array of strings. An array containing non-strings given.`)});else throw new TypeError(`${s} must be a string or an array of strings. "${e}" given.`);else{const t={};t[s]=r[s],z(t)}}return{status:!0,error:null}}catch(s){return{status:!1,error:s}}}function Q(r){try{if(typeof r!="object"){const e=typeof r;throw new TypeError(`Values given to isValidState() must be inside of an object. "${e}" given.`)}const s=["none","self","child"];for(const e in r)if(!s.includes(r[e]))throw new TypeError(`${e} must be one of the following values: ${s.join(", ")}. "${r[e]}" given.`);return{status:!0,error:null}}catch(s){return{status:!1,error:s}}}function X(r){try{if(typeof r!="object"){const e=typeof r;throw new TypeError(`Values given to isValidEvent() must be inside of an object. "${e}" given.`)}const s=["none","mouse","keyboard","character"];for(const e in r)if(!s.includes(r[e]))throw new TypeError(`${e} must be one of the following values: ${s.join(", ")}. "${r[e]}" given.`);return{status:!0,error:null}}catch(s){return{status:!1,error:s}}}function N(r){try{if(typeof r!="object"){const e=typeof r;throw new TypeError(`Values given to isValidHoverType() must be inside of an object. "${e}" given.`)}const s=["off","on","dynamic"];for(const e in r)if(!s.includes(r[e]))throw new TypeError(`${e} must be one of the following values: ${s.join(", ")}. "${r[e]}" given.`);return{status:!0,error:null}}catch(s){return{status:!1,error:s}}}function Y(r,s){if(b("string",{tagName:r}).status&&T(HTMLElement,s).status){const e=r.toLowerCase();let t=!0;for(const n in s)s[n].tagName.toLowerCase()!==e&&(t=!1);return t}else return!1}class L{constructor({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n=null}){l(this,"_dom",{toggle:null,parent:null});l(this,"_elements",{controlledMenu:null,parentMenu:null});l(this,"_open",!1);l(this,"_expandEvent",new CustomEvent("accessibleMenuExpand",{bubbles:!0,detail:{toggle:this}}));l(this,"_collapseEvent",new CustomEvent("accessibleMenuCollapse",{bubbles:!0,detail:{toggle:this}}));this._dom.toggle=s,this._dom.parent=e,this._elements.controlledMenu=t,this._elements.parentMenu=n}initialize(){var s;if(this.dom.toggle.setAttribute("aria-haspopup","true"),this.dom.toggle.setAttribute("aria-expanded","false"),Y("button",{toggle:this.dom.toggle})||this.dom.toggle.setAttribute("role","button"),this.dom.toggle.id===""||this.elements.controlledMenu.dom.menu.id===""){const e=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10);let t=((s=this.dom.toggle.innerText)==null?void 0:s.replace(/[^a-zA-Z0-9\s]/g,""))||"",n=e;!t.replace(/\s/g,"").length&&this.dom.toggle.getAttribute("aria-label")&&(t=this.dom.toggle.getAttribute("aria-label").replace(/[^a-zA-Z0-9\s]/g,"")),t.replace(/\s/g,"").length>0&&(t=t.toLowerCase().replace(/\s+/g,"-"),t.startsWith("-")&&(t=t.substring(1)),t.endsWith("-")&&(t=t.slice(0,-1)),n=`${t}-${n}`),this.dom.toggle.id=this.dom.toggle.id||`${n}-menu-button`,this.elements.controlledMenu.dom.menu.id=this.elements.controlledMenu.dom.menu.id||`${n}-menu`}this.elements.controlledMenu.dom.menu.setAttribute("aria-labelledby",this.dom.toggle.id),this.dom.toggle.setAttribute("aria-controls",this.elements.controlledMenu.dom.menu.id),this._collapse(!1)}get dom(){return this._dom}get elements(){return this._elements}get isOpen(){return this._open}set isOpen(s){b("boolean",{value:s}),this._open=s}_expand(s=!0){const{closeClass:e,openClass:t,transitionClass:n}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","true"),n!==""?(c(n,this.elements.controlledMenu.dom.menu),requestAnimationFrame(()=>{e!==""&&d(e,this.elements.controlledMenu.dom.menu),requestAnimationFrame(()=>{t!==""&&c(t,this.elements.controlledMenu.dom.menu),requestAnimationFrame(()=>{d(n,this.elements.controlledMenu.dom.menu)})})})):(t!==""&&c(t,this.elements.controlledMenu.dom.menu),e!==""&&d(e,this.elements.controlledMenu.dom.menu)),s&&this.dom.toggle.dispatchEvent(this._expandEvent)}_collapse(s=!0){const{closeClass:e,openClass:t,transitionClass:n}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","false"),n!==""?(c(n,this.elements.controlledMenu.dom.menu),requestAnimationFrame(()=>{t!==""&&d(t,this.elements.controlledMenu.dom.menu),requestAnimationFrame(()=>{e!==""&&c(e,this.elements.controlledMenu.dom.menu),requestAnimationFrame(()=>{d(n,this.elements.controlledMenu.dom.menu)})})})):(e!==""&&c(e,this.elements.controlledMenu.dom.menu),t!==""&&d(t,this.elements.controlledMenu.dom.menu)),s&&this.dom.toggle.dispatchEvent(this._collapseEvent)}open(){this.elements.controlledMenu.focusState="self",this._expand(),this.isOpen=!0}preview(){this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this._expand(),this.isOpen=!0}close(){this.isOpen&&(this.elements.controlledMenu.blur(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this._collapse(),this.isOpen=!1)}toggle(){this.isOpen?this.close():this.open()}closeSiblings(){this.elements.parentMenu&&this.elements.parentMenu.elements.submenuToggles.forEach(s=>{s!==this&&s.close()})}closeChildren(){this.elements.controlledMenu.elements.submenuToggles.forEach(s=>s.close())}}class A{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null}){l(this,"_dom",{item:null,link:null});l(this,"_elements",{parentMenu:null,childMenu:null,toggle:null});l(this,"_submenu",!1);this._dom.item=s,this._dom.link=e,this._elements.parentMenu=t,this._elements.childMenu=i,this._elements.toggle=o,this._submenu=n}initialize(){}get dom(){return this._dom}get elements(){return this._elements}get isSubmenuItem(){return this._submenu}focus(){this.elements.parentMenu.shouldFocus&&this.dom.link.focus()}blur(){this.elements.parentMenu.shouldFocus&&this.dom.link.blur()}}function S(r){try{const s=r.key||r.keyCode,e={Enter:s==="Enter"||s===13,Space:s===" "||s==="Spacebar"||s===32,Escape:s==="Escape"||s==="Esc"||s===27,ArrowUp:s==="ArrowUp"||s==="Up"||s===38,ArrowRight:s==="ArrowRight"||s==="Right"||s===39,ArrowDown:s==="ArrowDown"||s==="Down"||s===40,ArrowLeft:s==="ArrowLeft"||s==="Left"||s===37,Home:s==="Home"||s===36,End:s==="End"||s===35,Character:isNaN(s)&&!!s.match(/^[a-zA-Z]{1}$/),Tab:s==="Tab"||s===9,Asterisk:s==="*"||s===56};return Object.keys(e).find(t=>e[t]===!0)||""}catch{return""}}function u(r){r.preventDefault(),r.stopPropagation()}class k{constructor({menuElement:s,menuItemSelector:e="li",menuLinkSelector:t="a",submenuItemSelector:n="",submenuToggleSelector:i="a",submenuSelector:o="ul",controllerElement:h=null,containerElement:a=null,openClass:m="show",closeClass:p="hide",transitionClass:f="transitioning",isTopLevel:g=!0,parentMenu:_=null,hoverType:M="off",hoverDelay:y=250,enterDelay:C=-1,leaveDelay:E=-1}){l(this,"_MenuType",k);l(this,"_MenuItemType",A);l(this,"_MenuToggleType",L);l(this,"_dom",{menu:null,menuItems:[],submenuItems:[],submenuToggles:[],submenus:[],controller:null,container:null});l(this,"_selectors",{menuItems:"",menuLinks:"",submenuItems:"",submenuToggles:"",submenus:""});l(this,"_elements",{menuItems:[],submenuToggles:[],controller:null,parentMenu:null,rootMenu:null});l(this,"_openClass","show");l(this,"_closeClass","hide");l(this,"_transitionClass","transitioning");l(this,"_root",!0);l(this,"_currentChild",0);l(this,"_focusState","none");l(this,"_currentEvent","none");l(this,"_hoverType","off");l(this,"_hoverDelay",250);l(this,"_enterDelay",-1);l(this,"_leaveDelay",-1);l(this,"_hoverTimeout",null);l(this,"_errors",[]);this._dom.menu=s,this._dom.controller=h,this._dom.container=a,this._selectors.menuItems=e,this._selectors.menuLinks=t,this._selectors.submenuItems=n,this._selectors.submenuToggles=i,this._selectors.submenus=o,this._elements.menuItems=[],this._elements.submenuToggles=[],this._elements.controller=null,this._elements.parentMenu=_,this._elements.rootMenu=g?this:null,this._openClass=m||"",this._closeClass=p||"",this._transitionClass=f||"",this._root=g,this._hoverType=M,this._hoverDelay=y,this._enterDelay=C,this._leaveDelay=E}initialize(){if(!this._validate())throw new Error(`AccesibleMenu: cannot initialize menu. The following errors have been found:
 - ${this.errors.join(`
 - `)}`);if(this.elements.rootMenu===null&&this._findRootMenu(this),this._setDOMElements(),this.isTopLevel&&this.dom.controller&&this.dom.container){const s=new this._MenuToggleType({menuToggleElement:this.dom.controller,parentElement:this.dom.container,controlledMenu:this});this._elements.controller=s}this._createChildElements()}get dom(){return this._dom}get selectors(){return this._selectors}get elements(){return this._elements}get isTopLevel(){return this._root}get openClass(){return this.isTopLevel?this._openClass:this.elements.rootMenu.openClass}get closeClass(){return this.isTopLevel?this._closeClass:this.elements.rootMenu.closeClass}get transitionClass(){return this.isTopLevel?this._transitionClass:this.elements.rootMenu.transitionClass}get currentChild(){return this._currentChild}get focusState(){return this._focusState}get currentEvent(){return this._currentEvent}get currentMenuItem(){return this.elements.menuItems[this.currentChild]}get hoverType(){return this._root?this._hoverType:this.elements.rootMenu.hoverType}get hoverDelay(){return this._root?this._hoverDelay:this.elements.rootMenu.hoverDelay}get enterDelay(){return this._enterDelay===-1?this.hoverDelay:this._root?this._enterDelay:this.elements.rootMenu.enterDelay}get leaveDelay(){return this._leaveDelay===-1?this.hoverDelay:this._root?this._leaveDelay:this.elements.rootMenu.leaveDelay}get shouldFocus(){let s=!1;return(this.currentEvent==="keyboard"||this.currentEvent==="character")&&(s=!0),this.currentEvent==="mouse"&&this.hoverType==="dynamic"&&(s=!0),s}get errors(){return this._errors}set openClass(s){D({openClass:s}),this._openClass!==s&&(this._openClass=s)}set closeClass(s){D({closeClass:s}),this._closeClass!==s&&(this._closeClass=s)}set transitionClass(s){D({transitionClass:s}),this._transitionClass!==s&&(this._transitionClass=s)}set currentChild(s){b("number",{value:s});function e(t){if(["mouse","character"].includes(t.currentEvent)&&t.elements.parentMenu){let i=0,o=!1;for(;!o&&i<t.elements.parentMenu.elements.menuItems.length;){const h=t.elements.parentMenu.elements.menuItems[i];h.isSubmenuItem&&h.elements.toggle.elements.controlledMenu===t&&(o=!0,t.elements.parentMenu.currentEvent=t.currentEvent,t.elements.parentMenu.currentChild=i),i++}}}s<-1?(this._currentChild=-1,e(this)):s>=this.elements.menuItems.length?(this._currentChild=this.elements.menuItems.length-1,e(this)):this.focusChild!==s&&(this._currentChild=s,e(this))}set focusState(s){Q({value:s}),this._focusState!==s&&(this._focusState=s),this.elements.submenuToggles.length>0&&(s==="self"||s==="none")&&this.elements.submenuToggles.forEach(e=>{e.elements.controlledMenu.focusState="none"}),this.elements.parentMenu&&(s==="self"||s==="child")&&(this.elements.parentMenu.focusState="child")}set currentEvent(s){X({value:s}),this._currentEvent!==s&&(this._currentEvent=s,this.elements.submenuToggles.length>0&&this.elements.submenuToggles.forEach(e=>{e.elements.controlledMenu.currentEvent=s}))}set hoverType(s){N({value:s}),this._hoverType!==s&&(this._hoverType=s)}set hoverDelay(s){b("number",{value:s}),this._hoverDelay!==s&&(this._hoverDelay=s)}set enterDelay(s){b("number",{value:s}),this._enterDelay!==s&&(this._enterDelay=s)}set leaveDelay(s){b("number",{value:s}),this._leaveDelay!==s&&(this._leaveDelay=s)}_validate(){let s=!0,e;this._dom.container!==null||this._dom.controller!==null?e=T(HTMLElement,{menuElement:this._dom.menu,controllerElement:this._dom.controller,containerElement:this._dom.container}):e=T(HTMLElement,{menuElement:this._dom.menu}),e.status||(this._errors.push(e.error.message),s=!1);let t;if(this._selectors.submenuItems!==""?t=z({menuItemSelector:this._selectors.menuItems,menuLinkSelector:this._selectors.menuLinks,submenuItemSelector:this._selectors.submenuItems,submenuToggleSelector:this._selectors.submenuToggles,submenuSelector:this._selectors.submenus}):t=z({menuItemSelector:this._selectors.menuItems,menuLinkSelector:this._selectors.menuLinks}),t.status||(this._errors.push(t.error.message),s=!1),this._openClass!==""){const m=D({openClass:this._openClass});m.status||(this._errors.push(m.error.message),s=!1)}if(this._closeClass!==""){const m=D({closeClass:this._closeClass});m.status||(this._errors.push(m.error.message),s=!1)}if(this._transitionClass!==""){const m=D({transitionClass:this._transitionClass});m.status||(this._errors.push(m.error.message),s=!1)}const n=b("boolean",{isTopLevel:this._root});if(n.status||(this._errors.push(n.error.message),s=!1),this._elements.parentMenu!==null){const m=T(k,{parentMenu:this._elements.parentMenu});m.status||(this._errors.push(m.error.message),s=!1)}const i=N({hoverType:this._hoverType});i.status||(this._errors.push(i.error.message),s=!1);const o=b("number",{hoverDelay:this._hoverDelay});o.status||(this._errors.push(o.error.message),s=!1);const h=b("number",{enterDelay:this._enterDelay});h.status||(this._errors.push(h.error.message),s=!1);const a=b("number",{leaveDelay:this._leaveDelay});return a.status||(this._errors.push(a.error.message),s=!1),s}_setDOMElementType(s,e=this.dom.menu,t=!0){if(typeof this.selectors[s]=="string"){if(!Array.isArray(this.dom[s]))throw new Error(`AccessibleMenu: The "${s}" element cannot be set through _setDOMElementType.`);e!==this.dom.menu&&T(HTMLElement,{base:e});const i=Array.from(e.querySelectorAll(this.selectors[s])).filter(o=>o.parentElement===e);t?this._dom[s]=i:this._dom[s]=[...this._dom[s],...i]}else throw new Error(`AccessibleMenu: "${s}" is not a valid element type within the menu.`)}_resetDOMElementType(s){if(typeof this.dom[s]<"u"){if(!Array.isArray(this.dom[s]))throw new Error(`AccessibleMenu: The "${s}" element cannot be reset through _resetDOMElementType.`);this._dom[s]=[]}else throw new Error(`AccessibleMenu: "${s}" is not a valid element type within the menu.`)}_setDOMElements(){this._setDOMElementType("menuItems"),this.selectors.submenuItems!==""&&(this._setDOMElementType("submenuItems"),this._resetDOMElementType("submenuToggles"),this._resetDOMElementType("submenus"),this.dom.submenuItems.forEach(s=>{this._setDOMElementType("submenuToggles",s,!1),this._setDOMElementType("submenus",s,!1)}))}_findRootMenu(s){if(s.isTopLevel)this._elements.rootMenu=s;else if(s.elements.parentMenu!==null)this._findRootMenu(s.elements.parentMenu);else throw new Error("Cannot find root menu.")}_createChildElements(){this.dom.menuItems.forEach(s=>{let e;if(this.dom.submenuItems.includes(s)){const t=s.querySelector(this.selectors.submenuToggles),n=s.querySelector(this.selectors.submenus),i=new this._MenuType({menuElement:n,menuItemSelector:this.selectors.menuItems,menuLinkSelector:this.selectors.menuLinks,submenuItemSelector:this.selectors.submenuItems,submenuToggleSelector:this.selectors.submenuToggles,submenuSelector:this.selectors.submenus,openClass:this.openClass,closeClass:this.closeClass,transitionClass:this.transitionClass,isTopLevel:!1,parentMenu:this,hoverType:this.hoverType,hoverDelay:this.hoverDelay,enterDelay:this.enterDelay,leaveDelay:this.leaveDelay}),o=new this._MenuToggleType({menuToggleElement:t,parentElement:s,controlledMenu:i,parentMenu:this});this._elements.submenuToggles.push(o),e=new this._MenuItemType({menuItemElement:s,menuLinkElement:t,parentMenu:this,isSubmenuItem:!0,childMenu:i,toggle:o})}else{const t=s.querySelector(this.selectors.menuLinks);e=new this._MenuItemType({menuItemElement:s,menuLinkElement:t,parentMenu:this})}this._elements.menuItems.push(e)})}_handleFocus(){this.elements.menuItems.forEach((s,e)=>{s.dom.link.addEventListener("focus",()=>{this.focusState="self",this.currentChild=e})})}_handleClick(){function s(e,t,n){u(n),t.toggle(),t.isOpen&&(e.focusState="self",t.elements.controlledMenu.focusState="none")}this.elements.menuItems.forEach((e,t)=>{e.dom.link.addEventListener("pointerdown",()=>{this.currentEvent="mouse",this.elements.rootMenu.blurChildren(),this.focusChild(t)},{passive:!0}),e.isSubmenuItem&&e.elements.toggle.dom.toggle.addEventListener("pointerup",n=>{this.currentEvent="mouse",s(this,e.elements.toggle,n)})}),this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("pointerup",e=>{this.currentEvent="mouse",s(this,this.elements.controller,e)})}_handleHover(){this.elements.menuItems.forEach((s,e)=>{s.dom.link.addEventListener("pointerenter",t=>{if(!(t.pointerType==="pen"||t.pointerType==="touch")){if(this.hoverType==="on")this.currentEvent="mouse",this.elements.rootMenu.blurChildren(),this.focusChild(e),s.isSubmenuItem&&(this.enterDelay>0?this._hoverTimeout=setTimeout(()=>{s.elements.toggle.preview()},this.enterDelay):s.elements.toggle.preview());else if(this.hoverType==="dynamic"){const n=this.elements.submenuToggles.some(i=>i.isOpen);this.currentChild=e,(!this.isTopLevel||this.focusState!=="none")&&(this.currentEvent="mouse",this.elements.rootMenu.blurChildren(),this.focusCurrentChild()),s.isSubmenuItem&&(!this.isTopLevel||n)&&(this.currentEvent="mouse",this.elements.rootMenu.blurChildren(),this.focusCurrentChild(),this.enterDelay>0?this._hoverTimeout=setTimeout(()=>{s.elements.toggle.preview()},this.enterDelay):s.elements.toggle.preview())}}}),s.isSubmenuItem&&s.dom.item.addEventListener("pointerleave",t=>{t.pointerType==="pen"||t.pointerType==="touch"||(this.hoverType==="on"?this.leaveDelay>0?(clearTimeout(this._hoverTimeout),setTimeout(()=>{this.currentEvent="mouse",s.elements.toggle.close()},this.leaveDelay)):(this.currentEvent="mouse",s.elements.toggle.close()):this.hoverType==="dynamic"&&(this.isTopLevel||(this.leaveDelay>0?(clearTimeout(this._hoverTimeout),setTimeout(()=>{this.currentEvent="mouse",s.elements.toggle.close(),this.focusCurrentChild()},this.leaveDelay)):(this.currentEvent="mouse",s.elements.toggle.close(),this.focusCurrentChild()))))})})}_handleKeydown(){this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keydown",s=>{this.currentEvent="keyboard";const e=S(s);(e==="Space"||e==="Enter")&&u(s)})}_handleKeyup(){this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keyup",s=>{this.currentEvent="keyboard";const e=S(s);(e==="Space"||e==="Enter")&&(u(s),this.elements.controller.toggle(),this.elements.controller.isOpen&&this.focusFirstChild())})}focus(){this.focusState="self",this.shouldFocus&&this.dom.menu.focus()}blur(){this.focusState="none",this.shouldFocus&&this.dom.menu.blur()}focusCurrentChild(){this.focusState="self",this.currentChild!==-1&&this.currentMenuItem.focus()}focusChild(s){this.blurCurrentChild(),this.currentChild=s,this.focusCurrentChild()}focusFirstChild(){this.focusChild(0)}focusLastChild(){this.focusChild(this.elements.menuItems.length-1)}focusNextChild(){this.currentChild<this.elements.menuItems.length-1?this.focusChild(this.currentChild+1):this.focusCurrentChild()}focusPreviousChild(){this.currentChild>0?this.focusChild(this.currentChild-1):this.focusCurrentChild()}blurCurrentChild(){this.focusState="none",this.currentChild!==-1&&this.currentMenuItem.blur()}focusController(){this.dom.controller&&(this.shouldFocus&&this.dom.controller.focus(),this.focusState="none")}focusContainer(){this.dom.container&&(this.shouldFocus&&this.dom.container.focus(),this.focusState="none")}closeChildren(){this.elements.submenuToggles.forEach(s=>s.close())}blurChildren(){this.elements.menuItems.forEach(s=>{s.blur(),s.isSubmenuItem&&s.elements.childMenu.blurChildren()})}}class j extends A{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null,initialize:h=!0}){super({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n,childMenu:i,toggle:o}),h&&this.initialize()}}class V extends L{constructor({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n=null,initialize:i=!0}){super({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n}),i&&this.initialize()}open(){this.closeSiblings(),super.open()}preview(){this.closeSiblings(),super.preview()}close(){this.isOpen&&this.closeChildren(),super.close()}}class O extends k{constructor({menuElement:e,menuItemSelector:t="li",menuLinkSelector:n="a",submenuItemSelector:i="",submenuToggleSelector:o="a",submenuSelector:h="ul",controllerElement:a=null,containerElement:m=null,openClass:p="show",closeClass:f="hide",transitionClass:g="transitioning",isTopLevel:_=!0,parentMenu:M=null,hoverType:y="off",hoverDelay:C=250,enterDelay:E=-1,leaveDelay:w=-1,optionalKeySupport:v=!1,initialize:I=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuToggleSelector:o,submenuSelector:h,controllerElement:a,containerElement:m,openClass:p,closeClass:f,transitionClass:g,isTopLevel:_,parentMenu:M,hoverType:y,hoverDelay:C,enterDelay:E,leaveDelay:w});l(this,"_MenuType",O);l(this,"_MenuItemType",j);l(this,"_MenuToggleType",V);l(this,"_currentChild",-1);l(this,"_optionalSupport",!1);this._optionalSupport=v,I&&this.initialize()}initialize(){try{super.initialize(),this._handleFocus(),this._handleClick(),this._handleHover(),this._handleKeydown(),this._handleKeyup()}catch(e){console.error(e)}}get optionalKeySupport(){return this.isTopLevel?this._optionalSupport:this.elements.rootMenu.optionalKeySupport}set optionalKeySupport(e){b("boolean",{optionalKeySupport:e}),this._optionalSupport=e}_validate(){let e=super._validate();const t=b("boolean",{optionalKeySupport:this._optionalSupport});return t.status||(this._errors.push(t.error.message),e=!1),e}_handleClick(){super._handleClick(),document.addEventListener("pointerup",e=>{this.focusState!=="none"&&(this.currentEvent="mouse",!this.dom.menu.contains(e.target)&&!this.dom.menu!==e.target&&(this.closeChildren(),this.blur(),this.elements.controller&&this.elements.controller.close()))})}_handleKeydown(){super._handleKeydown(),this.dom.menu.addEventListener("keydown",e=>{this.currentEvent="keyboard";const t=S(e);if(this.focusState==="self"){const n=["Space","Enter"],i=["Escape"],o=["Escape"];this.optionalKeySupport?["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","Home","End"].includes(t)&&u(e):(this.currentMenuItem.isSubmenuItem&&n.includes(t)||this.elements.controller&&i.includes(t)||this.elements.parentMenu&&o.includes(t))&&u(e)}})}_handleKeyup(){super._handleKeyup(),this.dom.menu.addEventListener("keyup",e=>{this.currentEvent="keyboard";const t=S(e);this.focusState==="self"&&(t==="Space"||t==="Enter"?this.currentMenuItem.isSubmenuItem?(u(e),this.currentMenuItem.elements.toggle.isOpen?this.currentMenuItem.elements.toggle.close():this.currentMenuItem.elements.toggle.preview()):this.currentMenuItem.dom.link.click():t==="Escape"?this.elements.submenuToggles.some(i=>i.isOpen)?(u(e),this.closeChildren()):this.elements.parentMenu?(u(e),this.elements.parentMenu.currentEvent=this.currentEvent,this.elements.parentMenu.closeChildren(),this.elements.parentMenu.focusCurrentChild()):this.isTopLevel&&this.elements.controller&&this.elements.controller.isOpen&&(this.elements.controller.close(),this.focusController()):this.optionalKeySupport&&(t==="ArrowDown"||t==="ArrowRight"?(u(e),this.currentMenuItem.isSubmenuItem&&this.currentMenuItem.elements.toggle.isOpen?(this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.childMenu.focusFirstChild()):this.focusNextChild()):t==="ArrowUp"||t==="ArrowLeft"?(u(e),this.focusPreviousChild()):t==="Home"?(u(e),this.focusFirstChild()):t==="End"&&(u(e),this.focusLastChild())))})}}class ee extends j{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null,initialize:h=!0}){super({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n,childMenu:i,toggle:o,initialize:!1}),h&&this.initialize()}}class te extends V{constructor({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i=null,initialize:o=!0}){super({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i,initialize:!1});l(this,"_dom",{toggle:null,parent:null,container:null});this._dom.toggle=e,this._dom.parent=t,this._dom.container=n.isTopLevel?n.dom.container:n.dom.menu,o&&this.initialize()}_expand(e=!0){const{openClass:t,transitionClass:n}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","true"),n!==""?(c(n,this.dom.container),requestAnimationFrame(()=>{c(t,this.dom.container),requestAnimationFrame(()=>{d(n,this.dom.container)})})):t!==""&&c(t,this.dom.container),e&&this.dom.toggle.dispatchEvent(this._expandEvent)}_collapse(e=!0){const{closeClass:t,openClass:n,transitionClass:i}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","false"),i!==""?(c(i,this.dom.container),requestAnimationFrame(()=>{n!==""&&d(n,this.dom.container),requestAnimationFrame(()=>{t!==""&&c(t,this.dom.container),requestAnimationFrame(()=>{d(i,this.dom.container)})})})):(t!==""&&c(t,this.dom.container),n!==""&&d(n,this.dom.container)),e&&this.dom.toggle.dispatchEvent(this._collapseEvent)}}class F extends O{constructor({menuElement:e,menuItemSelector:t=".nav-item,li",menuLinkSelector:n=".nav-link,.dropdown-item",submenuItemSelector:i=".dropdown",submenuToggleSelector:o=".dropdown-toggle",submenuSelector:h=".dropdown-menu",controllerElement:a=null,containerElement:m=null,openClass:p="show",closeClass:f="collapse",transitionClass:g="transitioning",isTopLevel:_=!0,parentMenu:M=null,hoverType:y="off",hoverDelay:C=250,enterDelay:E=-1,leaveDelay:w=-1,optionalKeySupport:v=!1,disableBootstrap:I=!0,initialize:x=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuToggleSelector:o,submenuSelector:h,controllerElement:a,containerElement:m,openClass:p,closeClass:f,transitionClass:g,isTopLevel:_,parentMenu:M,hoverType:y,hoverDelay:C,enterDelay:E,leaveDelay:w,optionalKeySupport:v,initialize:!1});l(this,"_MenuType",F);l(this,"_MenuItemType",ee);l(this,"_MenuToggleType",te);l(this,"_disableBootstrap",!0);l(this,"_pseudoDropdownElement",document.createElement("div"));l(this,"_bootstrapEvents",["show.bs.dropdown","shown.bs.dropdown","hide.bs.dropdown","hidden.bs.dropdown"]);this._disableBootstrap=I,x&&this.initialize()}initialize(){super.initialize(),this.bootstrapDisabled&&this._disableBootstrapDropdownBehaviour()}get bootstrapDisabled(){return this._disableBootstrap}get bootstrapPseudoDropdownElement(){return this._pseudoDropdownElement}get bootstrapEvents(){return this._bootstrapEvents}_validate(){let e=super._validate();const t=b("boolean",{disableBootstrap:this._disableBootstrap});return t.status||(this._errors.push(t.error.message),e=!1),e}_disableBootstrapDropdownBehaviour(){this.elements.submenuToggles.forEach(e=>{this.bootstrapEvents.forEach(t=>{e.dom.toggle.addEventListener(t,n=>{u(n);const i=bootstrap.Dropdown.getInstance(n.target);i&&i._menu!==this.bootstrapPseudoDropdownElement&&(i._menu=this.bootstrapPseudoDropdownElement)},{once:!0})})})}}class R extends A{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null,initialize:h=!0}){super({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n,childMenu:i,toggle:o}),h&&this.initialize()}initialize(){super.initialize(),this.dom.item.setAttribute("role","none"),this.dom.link.setAttribute("role","menuitem"),this.dom.link.tabIndex=-1}focus(){super.focus(),this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=0)}blur(){super.blur(),this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=-1)}}class U extends L{constructor({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n=null,initialize:i=!0}){super({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n}),i&&this.initialize()}open(){this.closeSiblings(),super.open()}preview(){this.closeSiblings(),super.preview()}close(){this.isOpen&&(this.closeChildren(),this.elements.parentMenu&&this.elements.parentMenu.focusCurrentChild()),super.close()}}class K extends k{constructor({menuElement:e,menuItemSelector:t="li",menuLinkSelector:n="a",submenuItemSelector:i="",submenuToggleSelector:o="a",submenuSelector:h="ul",controllerElement:a=null,containerElement:m=null,openClass:p="show",closeClass:f="hide",transitionClass:g="transitioning",isTopLevel:_=!0,parentMenu:M=null,hoverType:y="off",hoverDelay:C=250,enterDelay:E=-1,leaveDelay:w=-1,initialize:v=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuToggleSelector:o,submenuSelector:h,controllerElement:a,containerElement:m,openClass:p,closeClass:f,transitionClass:g,isTopLevel:_,parentMenu:M,hoverType:y,hoverDelay:C,enterDelay:E,leaveDelay:w});l(this,"_MenuType",K);l(this,"_MenuItemType",R);l(this,"_MenuToggleType",U);v&&this.initialize()}initialize(){try{super.initialize(),this.isTopLevel?this.dom.menu.setAttribute("role","menubar"):this.dom.menu.setAttribute("role","menu"),this._handleFocus(),this._handleClick(),this._handleHover(),this._handleKeydown(),this._handleKeyup(),this.isTopLevel&&(this.elements.menuItems[0].dom.link.tabIndex=0)}catch(e){console.error(e)}}_handleClick(){super._handleClick(),document.addEventListener("pointerup",e=>{this.focusState!=="none"&&(this.currentEvent="mouse",!this.dom.menu.contains(e.target)&&!this.dom.menu!==e.target&&(this.closeChildren(),this.blur(),this.elements.controller&&this.elements.controller.close()))})}_handleKeydown(){super._handleKeydown(),this.dom.menu.addEventListener("keydown",e=>{this.currentEvent="keyboard";const t=S(e);if(t==="Tab"&&(this.elements.rootMenu.focusState!=="none"?(this.elements.rootMenu.blur(),this.elements.rootMenu.closeChildren()):this.elements.rootMenu.focus()),t==="Character")u(e);else if(this.isTopLevel){if(this.focusState==="self"){const n=["ArrowRight","ArrowLeft","Home","End"],i=["Space","Enter","ArrowDown","ArrowUp"],o=["Escape"];(n.includes(t)||this.currentMenuItem.isSubmenuItem&&i.includes(t)||this.elements.controller&&o.includes(t))&&u(e)}}else{const n=["Escape","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Home","End"],i=["Space","Enter"];(n.includes(t)||this.currentMenuItem.isSubmenuItem&&i.includes(t))&&u(e)}})}_handleKeyup(){super._handleKeyup(),this.dom.menu.addEventListener("keyup",e=>{this.currentEvent="keyboard";const t=S(e),{altKey:n,crtlKey:i,metaKey:o}=e;if(t==="Character"&&!(n||i||o))u(e),this.elements.rootMenu.currentEvent="character",this.focusNextChildWithCharacter(e.key);else if(this.isTopLevel){if(this.focusState==="self")if(t==="Space"||t==="Enter")this.currentMenuItem.isSubmenuItem?(u(e),this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.toggle.open(),requestAnimationFrame(()=>{this.currentMenuItem.elements.childMenu.focusFirstChild()})):this.currentMenuItem.dom.link.click();else if(t==="ArrowRight"){u(e);const a=this.currentMenuItem.isSubmenuItem&&this.currentMenuItem.elements.toggle.isOpen;this.focusNextChild(),a&&(this.currentMenuItem.isSubmenuItem?(this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.toggle.preview()):this.closeChildren())}else if(t==="ArrowLeft"){u(e);const a=this.currentMenuItem.isSubmenuItem&&this.currentMenuItem.elements.toggle.isOpen;this.focusPreviousChild(),a&&(this.currentMenuItem.isSubmenuItem?(this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.toggle.preview()):this.closeChildren())}else t==="ArrowDown"?this.currentMenuItem.isSubmenuItem&&(u(e),this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.toggle.open(),requestAnimationFrame(()=>{this.currentMenuItem.elements.childMenu.focusFirstChild()})):t==="ArrowUp"?this.currentMenuItem.isSubmenuItem&&(u(e),this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.toggle.open(),requestAnimationFrame(()=>{this.currentMenuItem.elements.childMenu.focusLastChild()})):t==="Home"?(u(e),this.focusFirstChild()):t==="End"?(u(e),this.focusLastChild()):t==="Escape"&&(this.elements.submenuToggles.some(m=>m.isOpen)?(u(e),this.closeChildren()):this.isTopLevel&&this.elements.controller&&this.elements.controller.isOpen&&(u(e),this.elements.controller.close(),this.focusController()))}else t==="Space"||t==="Enter"?this.currentMenuItem.isSubmenuItem?(u(e),this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.toggle.open(),requestAnimationFrame(()=>{this.currentMenuItem.elements.childMenu.focusFirstChild()})):this.currentMenuItem.dom.link.click():t==="Escape"?(u(e),this.elements.rootMenu.closeChildren(),this.elements.rootMenu.focusCurrentChild()):t==="ArrowRight"?this.currentMenuItem.isSubmenuItem?(u(e),this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.toggle.open(),requestAnimationFrame(()=>{this.currentMenuItem.elements.childMenu.focusFirstChild()})):(u(e),this.elements.rootMenu.closeChildren(),this.elements.rootMenu.focusNextChild(),this.elements.rootMenu.currentMenuItem.isSubmenuItem&&this.elements.rootMenu.currentMenuItem.elements.toggle.preview()):t==="ArrowLeft"?this.elements.parentMenu.currentMenuItem.isSubmenuItem&&(u(e),this.elements.parentMenu.currentMenuItem.elements.toggle.close(),this.elements.parentMenu.focusCurrentChild(),this.elements.parentMenu===this.elements.rootMenu&&(this.elements.rootMenu.closeChildren(),this.elements.rootMenu.focusPreviousChild(),this.elements.rootMenu.currentMenuItem.isSubmenuItem&&(this.elements.rootMenu.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.elements.rootMenu.currentMenuItem.elements.toggle.preview()))):t==="ArrowDown"?(u(e),this.focusNextChild()):t==="ArrowUp"?(u(e),this.focusPreviousChild()):t==="Home"?(u(e),this.focusFirstChild()):t==="End"&&(u(e),this.focusLastChild())})}focusNextChild(){this.currentChild===this.elements.menuItems.length-1?this.focusFirstChild():this.focusChild(this.currentChild+1)}focusPreviousChild(){this.currentChild===0?this.focusLastChild():this.focusChild(this.currentChild-1)}focusNextChildWithCharacter(e){const t=e.toLowerCase();let n=this.currentChild+1,i=!1;for(;!i&&n<this.elements.menuItems.length;){let o="";this.elements.menuItems[n].dom.item.innerText?o=this.elements.menuItems[n].dom.item.innerText:o=this.elements.menuItems[n].dom.item.textContent,o=o.replace(/[\s]/g,"").toLowerCase().charAt(0),o===t&&(i=!0,this.focusChild(n)),n++}}}class se extends R{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null,initialize:h=!0}){super({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n,childMenu:i,toggle:o,initialize:!1}),h&&this.initialize()}}class ne extends U{constructor({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i=null,initialize:o=!0}){super({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i,initialize:!1});l(this,"_dom",{toggle:null,parent:null,container:null});this._dom.toggle=e,this._dom.parent=t,this._dom.container=n.isTopLevel?n.dom.container:n.dom.menu,o&&this.initialize()}_expand(e=!0){const{openClass:t,transitionClass:n}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","true"),n!==""?(c(n,this.dom.container),requestAnimationFrame(()=>{c(t,this.dom.container),requestAnimationFrame(()=>{d(n,this.dom.container)})})):t!==""&&c(t,this.dom.container),e&&this.dom.toggle.dispatchEvent(this._expandEvent)}_collapse(e=!0){const{closeClass:t,openClass:n,transitionClass:i}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","false"),i!==""?(c(i,this.dom.container),requestAnimationFrame(()=>{n!==""&&d(n,this.dom.container),requestAnimationFrame(()=>{t!==""&&c(t,this.dom.container),requestAnimationFrame(()=>{d(i,this.dom.container)})})})):(t!==""&&c(t,this.dom.container),n!==""&&d(n,this.dom.container)),e&&this.dom.toggle.dispatchEvent(this._collapseEvent)}}class B extends K{constructor({menuElement:e,menuItemSelector:t=".nav-item,li",menuLinkSelector:n=".nav-link,.dropdown-item",submenuItemSelector:i=".dropdown",submenuToggleSelector:o=".dropdown-toggle",submenuSelector:h=".dropdown-menu",controllerElement:a=null,containerElement:m=null,openClass:p="show",closeClass:f="collapse",transitionClass:g="transitioning",isTopLevel:_=!0,parentMenu:M=null,hoverType:y="off",hoverDelay:C=250,enterDelay:E=-1,leaveDelay:w=-1,disableBootstrap:v=!0,initialize:I=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuToggleSelector:o,submenuSelector:h,controllerElement:a,containerElement:m,openClass:p,closeClass:f,transitionClass:g,isTopLevel:_,parentMenu:M,hoverType:y,hoverDelay:C,enterDelay:E,leaveDelay:w,initialize:!1});l(this,"_MenuType",B);l(this,"_MenuItemType",se);l(this,"_MenuToggleType",ne);l(this,"_disableBootstrap",!0);l(this,"_pseudoDropdownElement",document.createElement("div"));l(this,"_bootstrapEvents",["show.bs.dropdown","shown.bs.dropdown","hide.bs.dropdown","hidden.bs.dropdown"]);this._disableBootstrap=v,I&&this.initialize()}initialize(){super.initialize(),this.bootstrapDisabled&&this._disableBootstrapDropdownBehaviour()}get bootstrapDisabled(){return this._disableBootstrap}get bootstrapPseudoDropdownElement(){return this._pseudoDropdownElement}get bootstrapEvents(){return this._bootstrapEvents}_validate(){let e=super._validate();const t=b("boolean",{disableBootstrap:this._disableBootstrap});return t.status||(this._errors.push(t.error.message),e=!1),e}_disableBootstrapDropdownBehaviour(){this.elements.submenuToggles.forEach(e=>{this.bootstrapEvents.forEach(t=>{e.dom.toggle.addEventListener(t,n=>{u(n);const i=bootstrap.Dropdown.getInstance(n.target);i&&i._menu!==this.bootstrapPseudoDropdownElement&&(i._menu=this.bootstrapPseudoDropdownElement)},{once:!0})})})}}class W extends A{constructor({menuItemElement:e,menuLinkElement:t,parentMenu:n,isSubmenuItem:i=!1,childMenu:o=null,toggle:h=null,initialize:a=!0,submenuSibling:m=null}){super({menuItemElement:e,menuLinkElement:t,parentMenu:n,isSubmenuItem:i,childMenu:o,toggle:h});l(this,"_elements",{parentMenu:null,childMenu:null,toggle:null,sibling:null});this._elements.parentMenu=n,this._elements.childMenu=o,this._elements.toggle=h,this._elements.sibling=m,a&&this.initialize()}}class Z extends L{constructor({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n=null,initialize:i=!0}){super({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n}),i&&this.initialize()}open(){this.closeSiblings(),super.open()}preview(){this.closeSiblings(),super.preview()}close(){this.isOpen&&this.closeChildren(),super.close()}}class q extends k{constructor({menuElement:e,menuItemSelector:t="li",menuLinkSelector:n="a",submenuItemSelector:i="",submenuToggleSelector:o="button",submenuSelector:h="ul",submenuSubtoggleSelector:a="a",controllerElement:m=null,containerElement:p=null,openClass:f="show",closeClass:g="hide",transitionClass:_="transitioning",isTopLevel:M=!0,parentMenu:y=null,hoverType:C="off",hoverDelay:E=250,enterDelay:w=-1,leaveDelay:v=-1,optionalKeySupport:I=!1,initialize:x=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuSelector:h,submenuToggleSelector:o,controllerElement:m,containerElement:p,openClass:f,closeClass:g,transitionClass:_,isTopLevel:M,parentMenu:y,hoverType:C,hoverDelay:E,enterDelay:w,leaveDelay:v});l(this,"_MenuType",q);l(this,"_MenuItemType",W);l(this,"_MenuToggleType",Z);l(this,"_currentChild",-1);l(this,"_selectors",{menuItems:"",menuLinks:"",submenuItems:"",submenuToggles:"",submenus:"",submenuSubtoggles:""});l(this,"_optionalSupport",!1);this._optionalSupport=I,this._selectors.menuItems=t,this._selectors.submenuItems=i,this._selectors.submenuToggles=o,this._selectors.submenus=h,this._selectors.submenuSubtoggles=a,this._selectors.menuLinks=[...new Set([n,o])].join(","),x&&this.initialize()}initialize(){try{super.initialize(),this._handleFocus(),this._handleClick(),this._handleHover(),this._handleKeydown(),this._handleKeyup()}catch(e){console.error(e)}}get optionalKeySupport(){return this.isTopLevel?this._optionalSupport:this.elements.rootMenu.optionalKeySupport}set optionalKeySupport(e){b("boolean",{optionalKeySupport:e}),this._optionalSupport=e}_createChildElements(){this.dom.menuItems.forEach(e=>{let t,n;const i=e.querySelector(this.selectors.menuLinks);if(this.dom.submenuItems.includes(e)){const o=e.querySelector(this.selectors.submenuToggles),h=e.querySelector(this.selectors.submenus),a=new this._MenuType({menuElement:h,menuItemSelector:this.selectors.menuItems,menuLinkSelector:this.selectors.menuLinks,submenuItemSelector:this.selectors.submenuItems,submenuToggleSelector:this.selectors.submenuSubtoggles,submenuSelector:this.selectors.submenus,submenuSubtoggleSelector:this.selectors.submenuSubtoggles,openClass:this.openClass,closeClass:this.closeClass,transitionClass:this.transitionClass,isTopLevel:!1,parentMenu:this,hoverType:this.hoverType,hoverDelay:this.hoverDelay,enterDelay:this.enterDelay,leaveDelay:this.leaveDelay}),m=new this._MenuToggleType({menuToggleElement:o,parentElement:e,controlledMenu:a,parentMenu:this});this._elements.submenuToggles.push(m),o!==i?(n=new this._MenuItemType({menuItemElement:e,menuLinkElement:o,parentMenu:this,isSubmenuItem:!0,childMenu:a,toggle:m}),t=new this._MenuItemType({menuItemElement:e,menuLinkElement:i,parentMenu:this,submenuSibling:n})):t=new this._MenuItemType({menuItemElement:e,menuLinkElement:i,parentMenu:this,isSubmenuItem:!0,childMenu:a,toggle:m})}else t=new this._MenuItemType({menuItemElement:e,menuLinkElement:i,parentMenu:this});this._elements.menuItems.push(t),typeof n<"u"&&this._elements.menuItems.push(n)})}_validate(){let e=super._validate();const t=z({submenuSubtoggleSelector:this._selectors.submenuSubtoggles});t.status||(this._errors.push(t.error.message),e=!1);const n=b("boolean",{optionalKeySupport:this._optionalSupport});return n.status||(this._errors.push(n.error.message),e=!1),e}_handleClick(){super._handleClick(),document.addEventListener("pointerup",e=>{this.focusState!=="none"&&(this.currentEvent="mouse",!this.dom.menu.contains(e.target)&&!this.dom.menu!==e.target&&(this.closeChildren(),this.blur(),this.elements.controller&&this.elements.controller.close()))})}_handleHover(){this.elements.menuItems.forEach((e,t)=>{e.dom.link.addEventListener("pointerenter",n=>{if(!(n.pointerType==="pen"||n.pointerType==="touch")){if(this.hoverType==="on"){this.currentEvent="mouse",this.elements.rootMenu.blurChildren(),this.focusChild(t);let i=e.isSubmenuItem?e.elements.toggle:null;if(e.elements.sibling!==null&&(i=e.elements.sibling.elements.toggle),i===null)return;this.enterDelay>0?(clearTimeout(this._hoverTimeout),this._hoverTimeout=setTimeout(()=>{i.preview()},this.enterDelay)):i.preview()}else if(this.hoverType==="dynamic"){const i=this.elements.submenuToggles.some(o=>o.isOpen);if(this.currentChild=t,(!this.isTopLevel||this.focusState!=="none")&&(this.currentEvent="mouse",this.elements.rootMenu.blurChildren(),this.focusCurrentChild()),!this.isTopLevel||i){this.currentEvent="mouse",this.elements.rootMenu.blurChildren(),this.focusCurrentChild();let o=e.isSubmenuItem?e.elements.toggle:null;if(e.elements.sibling!==null&&(o=e.elements.sibling.elements.toggle),o===null)return;this.enterDelay>0?(clearTimeout(this._hoverTimeout),this._hoverTimeout=setTimeout(()=>{o.preview()},this.enterDelay)):o.preview()}}}}),e.isSubmenuItem&&e.dom.item.addEventListener("pointerleave",n=>{n.pointerType==="pen"||n.pointerType==="touch"||(this.hoverType==="on"?this.leaveDelay>0?(clearTimeout(this._hoverTimeout),setTimeout(()=>{this.currentEvent="mouse",e.elements.toggle.close()},this.leaveDelay)):(this.currentEvent="mouse",e.elements.toggle.close()):this.hoverType==="dynamic"&&(this.isTopLevel||(this.leaveDelay>0?(clearTimeout(this._hoverTimeout),setTimeout(()=>{this.currentEvent="mouse",e.elements.toggle.close(),this.focusCurrentChild()},this.leaveDelay)):(this.currentEvent="mouse",e.elements.toggle.close(),this.focusCurrentChild()))))})})}_handleKeydown(){super._handleKeydown(),this.dom.menu.addEventListener("keydown",e=>{this.currentEvent="keyboard";const t=S(e);if(this.focusState==="self"){const n=["Space","Enter"],i=["Escape"],o=["Escape"];this.optionalKeySupport?["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","Home","End"].includes(t)&&u(e):(this.currentMenuItem.isSubmenuItem&&n.includes(t)||this.elements.controller&&i.includes(t)||this.elements.parentMenu&&o.includes(t))&&u(e)}})}_handleKeyup(){super._handleKeyup(),this.dom.menu.addEventListener("keyup",e=>{this.currentEvent="keyboard";const t=S(e);this.focusState==="self"&&(t==="Space"||t==="Enter"?this.currentMenuItem.isSubmenuItem?(u(e),this.currentMenuItem.elements.toggle.isOpen?this.currentMenuItem.elements.toggle.close():this.currentMenuItem.elements.toggle.preview()):this.currentMenuItem.dom.link.click():t==="Escape"?this.elements.submenuToggles.some(i=>i.isOpen)?(u(e),this.closeChildren()):this.elements.parentMenu?(u(e),this.elements.parentMenu.currentEvent=this.currentEvent,this.elements.parentMenu.closeChildren(),this.elements.parentMenu.focusCurrentChild()):this.isTopLevel&&this.elements.controller&&this.elements.controller.isOpen&&(this.elements.controller.close(),this.focusController()):this.optionalKeySupport&&(t==="ArrowDown"||t==="ArrowRight"?(u(e),this.currentMenuItem.isSubmenuItem&&this.currentMenuItem.elements.toggle.isOpen?(this.currentMenuItem.elements.childMenu.currentEvent="keyboard",this.currentMenuItem.elements.childMenu.focusFirstChild()):this.focusNextChild()):t==="ArrowUp"||t==="ArrowLeft"?(u(e),this.focusPreviousChild()):t==="Home"?(u(e),this.focusFirstChild()):t==="End"&&(u(e),this.focusLastChild())))})}}class ie extends W{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null,initialize:h=!0,submenuSibling:a=null}){super({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n,childMenu:i,toggle:o,initialize:!1,submenuSibling:a}),h&&this.initialize()}}class oe extends Z{constructor({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i=null,initialize:o=!0}){super({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i,initialize:!1});l(this,"_dom",{toggle:null,parent:null,container:null});this._dom.toggle=e,this._dom.parent=t,this._dom.container=n.isTopLevel?n.dom.container:n.dom.menu,o&&this.initialize()}_expand(e=!0){const{openClass:t,transitionClass:n}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","true"),n!==""?(c(n,this.dom.container),requestAnimationFrame(()=>{c(t,this.dom.container),requestAnimationFrame(()=>{d(n,this.dom.container)})})):t!==""&&c(t,this.dom.container),e&&this.dom.toggle.dispatchEvent(this._expandEvent)}_collapse(e=!0){const{closeClass:t,openClass:n,transitionClass:i}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","false"),i!==""?(c(i,this.dom.container),requestAnimationFrame(()=>{n!==""&&d(n,this.dom.container),requestAnimationFrame(()=>{t!==""&&c(t,this.dom.container),requestAnimationFrame(()=>{d(i,this.dom.container)})})})):(t!==""&&c(t,this.dom.container),n!==""&&d(n,this.dom.container)),e&&this.dom.toggle.dispatchEvent(this._collapseEvent)}}class $ extends q{constructor({menuElement:e,menuItemSelector:t=".nav-item,li",menuLinkSelector:n=".nav-link,.dropdown-item",submenuItemSelector:i=".dropdown",submenuToggleSelector:o=".dropdown-toggle",submenuSelector:h=".dropdown-menu",submenuSubtoggleSelector:a=".dropdown-toggle",controllerElement:m=null,containerElement:p=null,openClass:f="show",closeClass:g="collapse",transitionClass:_="transitioning",isTopLevel:M=!0,parentMenu:y=null,hoverType:C="off",hoverDelay:E=250,enterDelay:w=-1,leaveDelay:v=-1,optionalKeySupport:I=!1,disableBootstrap:x=!0,initialize:ue=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuToggleSelector:o,submenuSelector:h,submenuSubtoggleSelector:a,controllerElement:m,containerElement:p,openClass:f,closeClass:g,transitionClass:_,isTopLevel:M,parentMenu:y,hoverType:C,hoverDelay:E,enterDelay:w,leaveDelay:v,optionalKeySupport:I,initialize:!1});l(this,"_MenuType",$);l(this,"_MenuItemType",ie);l(this,"_MenuToggleType",oe);l(this,"_disableBootstrap",!0);l(this,"_pseudoDropdownElement",document.createElement("div"));l(this,"_bootstrapEvents",["show.bs.dropdown","shown.bs.dropdown","hide.bs.dropdown","hidden.bs.dropdown"]);this._disableBootstrap=x,ue&&this.initialize()}initialize(){super.initialize(),this.bootstrapDisabled&&this._disableBootstrapDropdownBehaviour()}get bootstrapDisabled(){return this._disableBootstrap}get bootstrapPseudoDropdownElement(){return this._pseudoDropdownElement}get bootstrapEvents(){return this._bootstrapEvents}_validate(){let e=super._validate();const t=b("boolean",{disableBootstrap:this._disableBootstrap});return t.status||(this._errors.push(t.error.message),e=!1),e}_disableBootstrapDropdownBehaviour(){this.elements.submenuToggles.forEach(e=>{this.bootstrapEvents.forEach(t=>{e.dom.toggle.addEventListener(t,n=>{u(n);const i=bootstrap.Dropdown.getInstance(n.target);i&&i._menu!==this.bootstrapPseudoDropdownElement&&(i._menu=this.bootstrapPseudoDropdownElement)},{once:!0})})})}}class G extends A{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null,initialize:h=!0}){super({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n,childMenu:i,toggle:o}),h&&this.initialize()}initialize(){super.initialize(),this.dom.item.setAttribute("role","none"),this.dom.link.setAttribute("role","treeitem"),this.dom.link.tabIndex=-1}focus(){super.focus(),this.dom.link.tabIndex=0}blur(){super.blur(),this.dom.link.tabIndex=-1}}class J extends L{constructor({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n=null,initialize:i=!0}){super({menuToggleElement:s,parentElement:e,controlledMenu:t,parentMenu:n}),i&&this.initialize()}}class P extends k{constructor({menuElement:e,menuItemSelector:t="li",menuLinkSelector:n="a",submenuItemSelector:i="",submenuToggleSelector:o="a",submenuSelector:h="ul",controllerElement:a=null,containerElement:m=null,openClass:p="show",closeClass:f="hide",transitionClass:g="transitioning",isTopLevel:_=!0,parentMenu:M=null,hoverType:y="off",hoverDelay:C=250,enterDelay:E=-1,leaveDelay:w=-1,initialize:v=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuToggleSelector:o,submenuSelector:h,controllerElement:a,containerElement:m,openClass:p,closeClass:f,transitionClass:g,isTopLevel:_,parentMenu:M,hoverType:y,hoverDelay:C,enterDelay:E,leaveDelay:w});l(this,"_MenuType",P);l(this,"_MenuItemType",G);l(this,"_MenuToggleType",J);v&&this.initialize()}initialize(){try{super.initialize(),this.isTopLevel?(this.dom.menu.setAttribute("role","tree"),this.elements.menuItems[0].dom.link.tabIndex=0):this.dom.menu.setAttribute("role","group"),this._handleFocus(),this._handleClick(),this._handleHover(),this._handleKeydown(),this._handleKeyup()}catch(e){console.error(e)}}_handleKeydown(){super._handleKeydown(),this.dom.menu.addEventListener("keydown",e=>{this.currentEvent="keyboard";const t=S(e);if(t==="Tab"&&(this.elements.rootMenu.focusState!=="none"?this.elements.rootMenu.blur():this.elements.rootMenu.focus()),this.focusState==="self"){const n=["Space","ArrowUp","ArrowDown","ArrowLeft","Asterisk","Home","End"],i=["Enter","ArrowRight"],o=["Escape"];(n.includes(t)||this.currentMenuItem.isSubmenuItem&&i.includes(t)||this.elements.controller&&o.includes(t))&&u(e)}})}_handleKeyup(){super._handleKeyup(),this.dom.menu.addEventListener("keyup",e=>{this.currentEvent="keyboard";const t=S(e),{altKey:n,crtlKey:i,metaKey:o}=e;if(t==="Character"&&!(n||i||o))u(e),this.elements.rootMenu.currentEvent="character",this.focusNextNodeWithCharacter(e.key);else if(this.focusState==="self")if(t==="Enter"||t==="Space")u(e),this.currentMenuItem.isSubmenuItem?this.currentMenuItem.elements.toggle.isOpen?this.currentMenuItem.elements.toggle.close():this.currentMenuItem.elements.toggle.preview():this.currentMenuItem.dom.link.click();else if(t==="Escape")this.isTopLevel&&this.elements.controller&&this.elements.controller.isOpen&&(this.elements.controller.close(),this.focusController());else if(t==="ArrowDown")u(e),this.currentMenuItem.isSubmenuItem&&this.currentMenuItem.elements.toggle.isOpen?(this.blurCurrentChild(),this.currentMenuItem.elements.childMenu.currentEvent=this.currentEvent,this.currentMenuItem.elements.childMenu.focusFirstChild()):!this.isTopLevel&&this.currentChild===this.elements.menuItems.length-1?this.focusParentsNextChild():this.focusNextChild();else if(t==="ArrowUp"){u(e);const a=this.elements.menuItems[this.currentChild-1];a&&a.isSubmenuItem&&a.elements.toggle.isOpen?(this.blurCurrentChild(),this.currentChild=this.currentChild-1,this.currentMenuItem.elements.childMenu.currentEvent=this.currentEvent,this.focusChildsLastNode()):!this.isTopLevel&&this.currentChild===0?(this.blurCurrentChild(),this.elements.parentMenu.currentEvent=this.currentEvent,this.elements.parentMenu.focusCurrentChild()):this.focusPreviousChild()}else t==="ArrowRight"?this.currentMenuItem.isSubmenuItem&&(u(e),this.currentMenuItem.elements.toggle.isOpen?(this.blurCurrentChild(),this.currentMenuItem.elements.childMenu.currentEvent=this.currentEvent,this.currentMenuItem.elements.childMenu.focusFirstChild()):this.currentMenuItem.elements.toggle.preview()):t==="ArrowLeft"?(u(e),this.currentMenuItem.isSubmenuItem&&this.currentMenuItem.elements.toggle.isOpen?(this.currentMenuItem.elements.childMenu.blurCurrentChild(),this.currentMenuItem.elements.toggle.close()):this.isTopLevel||(this.blurCurrentChild(),this.elements.parentMenu.currentEvent=this.currentEvent,this.elements.parentMenu.focusCurrentChild())):t==="Home"?(u(e),this.blurCurrentChild(),this.elements.rootMenu.focusFirstChild()):t==="End"?(u(e),this.blurCurrentChild(),this.elements.rootMenu.focusLastNode()):t==="Asterisk"&&(u(e),this.openChildren())})}focusLastNode(){const e=this.elements.menuItems.length-1,t=this.elements.menuItems[e];t.isSubmenuItem&&t.elements.toggle.isOpen?(this.currentChild=e,t.elements.childMenu.currentEvent=this.currentEvent,t.elements.childMenu.focusLastNode()):this.focusLastChild()}openChildren(){this.elements.submenuToggles.forEach(e=>e.preview())}focusNextNodeWithCharacter(e){function t(p){let f=[];return p.elements.menuItems.forEach(g=>{f.push(g),g.isSubmenuItem&&g.elements.toggle.isOpen&&(f=[...f,...t(g.elements.toggle.elements.controlledMenu)])}),f}const n=e.toLowerCase(),i=t(this.elements.rootMenu),o=i.indexOf(this.currentMenuItem)+1,h=[...i.slice(o),...i.slice(0,o)];let a=0,m=!1;for(;!m&&a<h.length;){let p="";if(h[a].dom.item.innerText?p=h[a].dom.item.innerText:p=h[a].dom.item.textContent,p=p.replace(/[\s]/g,"").toLowerCase().charAt(0),p===n){m=!0;const f=h[a].elements.parentMenu,g=f.elements.menuItems.indexOf(h[a]);this.elements.rootMenu.blurChildren(),f.focusChild(g)}a++}}focusParentsNextChild(){this.elements.parentMenu&&(this.elements.parentMenu.currentEvent=this.currentEvent,this.elements.parentMenu.currentChild===this.elements.parentMenu.elements.menuItems.length-1?(this.elements.parentMenu.blurCurrentChild(),this.elements.parentMenu.focusParentsNextChild()):(this.blurChildren(),this.elements.parentMenu.focusNextChild()))}focusChildsLastNode(){this.currentMenuItem.elements.childMenu.currentEvent=this.currentEvent,this.currentMenuItem.elements.childMenu.focusLastChild(),this.currentMenuItem.elements.childMenu.currentMenuItem.isSubmenuItem&&this.currentMenuItem.elements.childMenu.currentMenuItem.elements.toggle.isOpen&&(this.currentMenuItem.elements.childMenu.blurCurrentChild(),this.currentMenuItem.elements.childMenu.focusChildsLastNode())}}class re extends G{constructor({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n=!1,childMenu:i=null,toggle:o=null,initialize:h=!0}){super({menuItemElement:s,menuLinkElement:e,parentMenu:t,isSubmenuItem:n,childMenu:i,toggle:o,initialize:!1}),h&&this.initialize()}}class le extends J{constructor({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i=null,initialize:o=!0}){super({menuToggleElement:e,parentElement:t,controlledMenu:n,parentMenu:i,initialize:!1});l(this,"_dom",{toggle:null,parent:null,container:null});this._dom.toggle=e,this._dom.parent=t,this._dom.container=n.isTopLevel?n.dom.container:n.dom.menu,o&&this.initialize()}_expand(e=!0){const{openClass:t,transitionClass:n}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","true"),n!==""?(c(n,this.dom.container),requestAnimationFrame(()=>{c(t,this.dom.container),requestAnimationFrame(()=>{d(n,this.dom.container)})})):t!==""&&c(t,this.dom.container),e&&this.dom.toggle.dispatchEvent(this._expandEvent)}_collapse(e=!0){const{closeClass:t,openClass:n,transitionClass:i}=this.elements.controlledMenu;this.dom.toggle.setAttribute("aria-expanded","false"),i!==""?(c(i,this.dom.container),requestAnimationFrame(()=>{n!==""&&d(n,this.dom.container),requestAnimationFrame(()=>{t!==""&&c(t,this.dom.container),requestAnimationFrame(()=>{d(i,this.dom.container)})})})):(t!==""&&c(t,this.dom.container),n!==""&&d(n,this.dom.container)),e&&this.dom.toggle.dispatchEvent(this._collapseEvent)}}class H extends P{constructor({menuElement:e,menuItemSelector:t=".nav-item,li",menuLinkSelector:n=".nav-link,.dropdown-item",submenuItemSelector:i=".dropdown",submenuToggleSelector:o=".dropdown-toggle",submenuSelector:h=".dropdown-menu",controllerElement:a=null,containerElement:m=null,openClass:p="show",closeClass:f="collapse",transitionClass:g="transitioning",isTopLevel:_=!0,parentMenu:M=null,hoverType:y="off",hoverDelay:C=250,enterDelay:E=-1,leaveDelay:w=-1,disableBootstrap:v=!0,initialize:I=!0}){super({menuElement:e,menuItemSelector:t,menuLinkSelector:n,submenuItemSelector:i,submenuToggleSelector:o,submenuSelector:h,controllerElement:a,containerElement:m,openClass:p,closeClass:f,transitionClass:g,isTopLevel:_,parentMenu:M,hoverType:y,hoverDelay:C,enterDelay:E,leaveDelay:w,initialize:!1});l(this,"_MenuType",H);l(this,"_MenuItemType",re);l(this,"_MenuToggleType",le);l(this,"_disableBootstrap",!0);l(this,"_pseudoDropdownElement",document.createElement("div"));l(this,"_bootstrapEvents",["show.bs.dropdown","shown.bs.dropdown","hide.bs.dropdown","hidden.bs.dropdown"]);this._disableBootstrap=v,I&&this.initialize()}initialize(){super.initialize(),this.bootstrapDisabled&&this._disableBootstrapDropdownBehaviour()}get bootstrapDisabled(){return this._disableBootstrap}get bootstrapPseudoDropdownElement(){return this._pseudoDropdownElement}get bootstrapEvents(){return this._bootstrapEvents}_validate(){let e=super._validate();const t=b("boolean",{disableBootstrap:this._disableBootstrap});return t.status||(this._errors.push(t.error.message),e=!1),e}_disableBootstrapDropdownBehaviour(){this.elements.submenuToggles.forEach(e=>{this.bootstrapEvents.forEach(t=>{e.dom.toggle.addEventListener(t,n=>{u(n);const i=bootstrap.Dropdown.getInstance(n.target);i&&i._menu!==this.bootstrapPseudoDropdownElement&&(i._menu=this.bootstrapPseudoDropdownElement)},{once:!0})})})}}return{Bootstrap5DisclosureMenu:F,Bootstrap5Menubar:B,Bootstrap5TopLinkDisclosureMenu:$,Bootstrap5Treeview:H}}();
